---
title: "Day 2 - AM"
output: 
  blogdown::html_page: 
    toc: true
    toc_depth: 1
    highlight: tango
    css: css/camp_style.css
    number_sections: true
    self_contained: false
    fontsize: 18pt
    monofont: Source Code Pro
---

<style>
h1 .header-section-number {background: #62BE2C;}
hr {background: #62BE2C;}
</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = F, message = F)
knitr::opts_chunk$set(fig.width = 10, fig.height = 5.2) 
xaringanExtra::use_clipboard()
htmltools::tagList(rmarkdown::html_dependency_font_awesome())
```

## Good morning, Jedis! {-}
<hr class="hrlvl2">

![](../images/day2_bb8_sq.png){width="260" style="float: left; margin-right: 60px; margin-top: -10px;"}


<div style="clear: both;"></div>


# Review - New project
<hr>

```{r rev-proj, child='../../static/modules/_example_7steps/ozone_review.Rmd'}
```

## Porg review {-}
<hr class="hrlvl2">

The _poggle_ of porgs has returned to help review the `dplyr` functions. Follow along by reading the __porg__ data from the URL below.

```{r, eval = F}
library(readr)
porgs <- read_csv("https://mn-r.netlify.com/data/porg_data.csv")
```

<br>

```{r porg-tabs, results='asis', echo=F}
cat(readLines("porg_tabs.txt"))
```

<br>


> ### Wait.... __So where's Finn?__ {-}
>


# Finn needs us! {-}

Turn this ship around BB8, Finn needs us back on Jakku. We're going to have to get better at our roll call procedure. Here we come Finn.  __Blast off!__ 

<br>

![](../images/finn_run.gif){style="margin-left: 18%; width: 60%; margin-top: 6px;"}

<br>


# Jakku re-visited
<hr>

Okay, so we're back on this ol' dust bucket planet. Let's try not to forget anyone this time. Data droid, let me know if anyone goes missing. 

```{r convert-tbl, child='../../static/modules/ton_conversion_tbl.Rmd'}
```


# Join tables with **left_join**
<hr>
```{r intro-join, child='../../static/modules/dplyr/dplyr_leftjoin/intro_scrap.Rmd'}
```

```{r porg-join, child='../../static/modules/dplyr/dplyr_leftjoin/porg_names.Rmd'}
```

```{r c3po-join, child='../../static/modules/dplyr/dplyr_leftjoin/c3po_xtra_rows.Rmd'}
```


## Back to the scrap yard {-}
<hr class="hrlvl2">
```{r join-convert, child='../../static/modules/dplyr/dplyr_leftjoin/convert_&_scrap.Rmd'}
```

```{r calc-lbs-item, child='../../static/modules/dplyr/dplyr_mutate/pounds_per_scrap.Rmd'}
```



# `summarize()` this
<hr>
```{r summarize, child='../../static/modules/dplyr/dplyr_summarize/summarize.Rmd'}
```


# `group_by()` category
<hr>

`group_by()` gives us the power to calculate separate results for each category in the data. This could be the average concentration at each of your monitoring sites, or the total emissions of a pollutant from each facility or stack.

```{r group-by, child='../../static/modules/dplyr/dplyr_groupby/group_by_nopipe.Rmd'}
```


<br>

# `ifelse()`
<hr>
```{r if-yoda, child='../../static/modules/base/base_ifelse/yoda.Rmd'}
```

```{r if-cheap, child='../../static/modules/base/base_ifelse/cheap_items.Rmd'}
```


> __CONGRATULATIONS__ of galactic proportions to you. 
>
> We now have a clean and tidy data set. If BB8 ever receives new data again, we can re-run this script and in seconds we'll have it all cleaned up.
>


## Save results {-}
```{r save2pm}
write_csv(scrap, "results/scrap_day2.csv")

```
 

<div style="clear: both;"></div>



# Plots with _ggplot2_
<hr>

#### _Plot the data, Plot the data, Plot the data_ {-}

<br>

![](../images/ggplot2_hex.png){align="right" width="180" style="margin-right: 70px; margin-top: -124px;"}

```{r gg-sand, child = '../../static/modules/ggplot/ggplot_sandwich/sandwich.Rmd'}
```


<br>


<div class="tip">
### <i class="fa fa-user-astronaut" style="color: green;"></i> A short detour {-}

#### Who's the tallest of them all? {-}

```{r, eval=F}
# Install new packages
install.packages("ggrepel")
```

<br>

```{r, message=F, warning=F}
# Load packages
library(dplyr)
library(ggplot2)
library(ggrepel)

# Get starwars character data
star_df <- starwars
```

<br>

```{r, warning=F}
# What is this?
glimpse(star_df)
```

<br>

Plot a histogram of the character heights.

```{r, message=F, warning=F}
# Height distribution
ggplot(star_df, aes(x = height)) + geom_histogram(fill = "hotpink")
```

<br>

<div class="note">

- Try changing the fill color to __"<span style="color: #FD6A02;">darkorange</span>"__.

- Try making a histogram of the column `mass`.

</div>

<br>

Plot comparisons between height and mass with `geom_point(...)`.
```{r, eval=F, message=F, warning=F}
# Height vs. Mass scatterplot
ggplot(star_df, aes(y = mass, x = height)) +
   geom_point(aes(color = species), size = 5)
```
<br>

Who's who? Let's add some labels to the points.
```{r, eval=F, message=F, warning=F}
# Add labels
ggplot(star_df, aes(y = mass, x = height)) +
  geom_point(aes(color = species), size = 5) +
  geom_text_repel(aes(label = name))


# Use a log scale for Mass on the y-axis
ggplot(star_df, aes(y = mass, x = height)) +
  geom_point(aes(color = species), size = 5) +
  geom_text_repel(aes(label = name)) +
  scale_y_log10()

```

<br>

Let's drop the "Hutt" species before plotting.
```{r, eval=F, message=F, warning=F}
# Without the Hutt
ggplot(filter(star_df, species != "Hutt"), aes(y = mass, x = height)) +
  geom_point(aes(color = species), size = 5) +
  geom_text_repel(aes(label = name, color = species))

```

<br>

We can add `facet_wrap` to make a chart for each species.
```{r, eval=T, message=F, warning=F}
# Split out by species
ggplot(star_df, aes(x = mass, y = height)) +
  geom_point(aes(color = species), size = 3) +
  facet_wrap("species") +
  guides(color = "none")
```
</div>


<br>


### <i class="fa fa-rocket" aria-hidden="true"></i> Return to [Homebase](../post/day-2.html) {-}

<br>

