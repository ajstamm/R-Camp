---
title: "Day 2 - PM"
output: 
  blogdown::html_page: 
    toc: true
    toc_depth: 1
    highlight: tango
    css: css/camp_style.css
    number_sections: true
    self_contained: false
    fontsize: 18pt
    monofont: Source Code Pro
---

<script src="/rmarkdown-libs/clipboard/clipboard.min.js"></script>
<link href="/rmarkdown-libs/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
<script src="/rmarkdown-libs/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
<script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
<link href="/rmarkdown-libs/font-awesome/css/all.css" rel="stylesheet" />
<link href="/rmarkdown-libs/font-awesome/css/v4-shims.css" rel="stylesheet" />
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>
  <link rel="stylesheet" href="css/camp_style.css" type="text/css" />

<div id="TOC">
<ul>
<li><a href="#summarize-this"><span class="toc-section-number">1</span> <code>summarize()</code> this</a></li>
<li><a href="#group_by-category"><span class="toc-section-number">2</span> <code>group_by()</code> category</a></li>
<li><a href="#save-files"><span class="toc-section-number">3</span> Save files</a></li>
<li><a href="#grouped-mutate"><span class="toc-section-number">4</span> Grouped <code>mutate()</code></a></li>
<li><a href="#guess-who">Guess Who?</a></li>
<li><a href="#ifelse"><span class="toc-section-number">5</span> <code>ifelse()</code></a></li>
<li><a href="#plots-with-ggplot2"><span class="toc-section-number">6</span> Plots with <em>ggplot2</em></a></li>
<li><a href="#more-plots"><span class="toc-section-number">7</span> More Plots</a></li>
<li><a href="#its-finn-time">It’s Finn time</a></li>
<li><a href="#plot-glossary">Plot Glossary</a></li>
<li><a href="#homeworld-training">Homeworld training</a></li>
</ul>
</div>

<style>
h1 .header-section-number {background: #62BE2C;}
hr {background: #62BE2C;}
</style>
<div id="summarize-this" class="section level1" number="1">
<h1><span class="header-section-number">1</span> <code>summarize()</code> this</h1>
<hr>
<p><img src="../images/summarize_diagram.png" width="590" /></p>
<p><code>summarize()</code> uses summary functions <code>mean()</code> or <code>sum()</code> to collapse the data down to a single summary row. To get started we’ll need some summary functions like <code>sum()</code>, <code>mean()</code>, <code>min()</code>, and <code>max()</code>.</p>
<div id="sum" class="section level2 unnumbered">
<h2><code>sum()</code></h2>
<p>Use <code>summarize()</code> and <code>sum()</code> to find the total credits of all the scrap combined.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>(scrap, <span class="at">total_credits =</span> <span class="fu">sum</span>(credits))</span></code></pre></div>
</div>
<div id="mean" class="section level2 unnumbered">
<h2><code>mean()</code></h2>
<p>Use <code>summarize()</code> and <code>mean()</code> to calculate the <em>mean</em> <code>price_per_pound</code> in the scrap report.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>(scrap, <span class="at">mean_price =</span> <span class="fu">mean</span>(price_per_pound, <span class="at">na.rm =</span> T))</span></code></pre></div>
<p><br></p>
<div id="note" class="section level3 unnumbered note">
<h3>Note</h3>
<p><strong>What’s the average of missing data?</strong> I don’t know.</p>
<p>Did you see the <code>na.rm = TRUE</code> inside the <code>mean()</code> function. This tells R to ignore empty cells or missing values that show up in R as <code>NA</code>. If you leave <code>na.rm</code> out, the <em>mean</em> function will return ‘NA’ if it finds a missing value anywhere in the data.</p>
</div>
</div>
<div id="median" class="section level2 unnumbered">
<h2><code>median()</code></h2>
<p>Use summarize to calculate the <em>median</em> price_per_pound in the scrap report.</p>
<p><code>summarize(scrap, median_price = median(price_per_pound, na.rm = T))</code></p>
</div>
<div id="max" class="section level2 unnumbered">
<h2><code>max()</code></h2>
<p>Use summarize to calculate the <em>maximum</em> price per pound any scrapper got for their scrap.</p>
<p><code>summarize(scrap, max_price = max(price_per_pound, na.rm = T))</code></p>
</div>
<div id="min" class="section level2 unnumbered">
<h2><code>min()</code></h2>
<p>Use summarize to calculate the <em>minimum</em> price per pound any scrapper got for their scrap.</p>
<p><code>summarize(scrap, min_price = min(price_per_pound, na.rm = T))</code></p>
</div>
<div id="sd" class="section level2 unnumbered">
<h2><code>sd()</code></h2>
<p>What is the <em>standard deviation</em> of the credits?</p>
<p><code>summarize(scrap, stdev_credits = sd(credits))</code></p>
</div>
<div id="quantile" class="section level2 unnumbered">
<h2><code>quantile()</code></h2>
<p><em>Quantiles</em> are useful for finding the upper or lower range of a column. Use the <code>quantile()</code> function to find the the 5th and 95th quantile of the prices.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>(scrap, </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">price_5th_pctile  =</span> <span class="fu">quantile</span>(price_per_pound, <span class="fl">0.05</span>, <span class="at">na.rm =</span> T),</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">price_95th_pctile =</span> <span class="fu">quantile</span>(price_per_pound, <span class="fl">0.95</span>))</span></code></pre></div>
<p><strong>Hint:</strong> Add <code>na.rm = T</code> to <code>quantile()</code>.</p>
</div>
<div id="n" class="section level2 unnumbered">
<h2><code>n()</code></h2>
<p><code>n()</code> stands for <em>count</em>.</p>
<p>Use summarize and <code>n()</code> to count the number of scrap records.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>(scrap, <span class="at">scrap_records =</span> <span class="fu">n</span>())</span></code></pre></div>
<p><br></p>
<div id="explore" class="section level3 unnumbered tip">
<h3><i class="fa fa-user-astronaut" style="color: green;"></i> Explore!</h3>
<ol style="list-style-type: decimal">
<li>Create a summary of the scrap data that includes 3 of the summary functions above. The following is one example.</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>summary <span class="ot">&lt;-</span> <span class="fu">summarize</span>(scrap, </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">max_credits      =</span> __________,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">weight_90th_pct  =</span> <span class="fu">quantile</span>(Weight, <span class="fl">0.90</span>),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">count_records    =</span> __________,</span></code></pre></div>
<p><br></p>
<p><br></p>
<ol start="2" style="list-style-type: decimal">
<li>Use summarize and <code>n()</code> to count the number of reported scrap records going to <code>Niima outpost</code>.</li>
</ol>
<p><strong>Hint:</strong> Use <code>filter()</code> first.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>niima_scrap <span class="ot">&lt;-</span> <span class="fu">filter</span>(scrap, destination <span class="sc">==</span> <span class="st">&quot;Niima Outpost&quot;</span>) </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>niima_scrap <span class="ot">&lt;-</span> <span class="fu">summarize</span>(niima_scrap, <span class="at">scrap_records =</span> <span class="fu">n</span>())</span></code></pre></div>
</div>
<p><br></p>
<blockquote>
<h3 style="margin-top: 12px;">
<strong>How about a count of the records for every city?</strong>
</h3>
<p>That sounds like a whole lot of summarizing.</p>
<p>It’d sure be nice if we could easily find the mean for every city.</p>
</blockquote>
</div>
</div>
<div id="group_by-category" class="section level1" number="2">
<h1><span class="header-section-number">2</span> <code>group_by()</code> category</h1>
<hr>
<p><code>group_by()</code> gives us the power to calculate separate results for each category in the data. This could be the average concentration at each of your monitoring sites, or the total emissions of a pollutant from each facility or stack.</p>
<div id="bargain-hunters" class="section level2 unnumbered">
<h2>Bargain hunters</h2>
<p>Who’s selling goods for cheap? Use <code>group_by</code> with the column <em>Origin</em> to find the <code>mean(price_per_pound)</code> at each Origin City.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>scrap_summary <span class="ot">&lt;-</span> <span class="fu">group_by</span>(scrap, origin) <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">summarize</span>(<span class="at">mean_price =</span>  <span class="fu">mean</span>(price_per_pound, <span class="at">na.rm =</span> T))</span></code></pre></div>
<p><br></p>
<details>
<summary class="btn_code_blue">
Rounding digits
</summary>
<div class="note" style="margin-top: -7px;">
<p>
<div id="rounding" class="section level3 unnumbered">
<h3>Rounding</h3>
<p>You can round the prices to a certain number of digits using the <code>round()</code> function. We can finish by adding the <code>arrange()</code> function to sort the table by our new column.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>scrap_means <span class="ot">&lt;-</span> scrap <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>               <span class="fu">group_by</span>(origin) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>               <span class="fu">summarize</span>(<span class="at">mean_price       =</span>  <span class="fu">mean</span>(price_per_pound, <span class="at">na.rm =</span> T),</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>                         <span class="at">mean_price_round =</span> <span class="fu">round</span>(mean_price, <span class="at">digits =</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>               <span class="fu">arrange</span>(mean_price_round) <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>               <span class="fu">ungroup</span>()</span></code></pre></div>
<p><br></p>
</div>
<div id="note-1" class="section level3 unnumbered">
<h3>Note</h3>
<p>The <code>round()</code> function in R does not automatically round values ending in 5 upwards. Instead it uses <em>scientific rounding</em>, which rounds values ending in 5 to the nearest <strong>even</strong> number. So 2.5 rounded to the nearest even number rounds down to <strong>2</strong>, and 3.5 rounded to the nearest even number rounds up <strong>4</strong>.</p>
</p>
</div>
</div>
</details>
<p><br></p>
</div>
<div id="busiest-scrap-city" class="section level2 unnumbered">
<h2>Busiest scrap city</h2>
<p>So who’s making lots of transactions? Try using <code>group_by</code> with the column <em>origin</em> to count the number of scrap records at each city.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>scrap_counts <span class="ot">&lt;-</span> scrap <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>                <span class="fu">group_by</span>(origin) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>                <span class="fu">summarize</span>(<span class="at">origin_count  =</span>  <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>                <span class="fu">ungroup</span>()</span></code></pre></div>
<p><br></p>
<div id="spock-tip" class="section level3 unnumbered note">
<h3><i class="fas fa-hand-spock"></i> Spock-tip!</h3>
<p>Ending with <code>ungroup()</code> is good practice. This prevents your data from staying grouped after the summarizing has been completed.</p>
</div>
</div>
</div>
<div id="save-files" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Save files</h1>
<hr>
<p>Let’s save the mean price table we created to a <em>CSV</em>. That way we can send it to Rey. To save a table we can use the <code>write_csv()</code> function from our favorite <strong>readr</strong> package.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Write the file to your results folder</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(scrap_means, <span class="st">&quot;results/prices_by_origin.csv&quot;</span>)</span></code></pre></div>
<p><br></p>
<div class="red-note">
<h3 style="margin-top: 12px; color: white; margin-top: -6px; font-size: 22px;">
<i class="fas fa-exclamation-triangle"></i> Note
</h3>
<p>By default, R will overwrite a file if the file already exists in the same folder. To be safe, save processed data to a new folder called <code>results/</code> and not to your raw <code>data/</code> folder.</p>
</div>
</div>
<div id="grouped-mutate" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Grouped <code>mutate()</code></h1>
<hr>
<p>We can bring back <code>mutate</code> to add a column based on the grouped values in a data set. For example, you may want to add a column showing the mean price by origin to the whole table, but still keep all of the records. This is a good way to add values to the table to serve as a reference point.</p>
<blockquote>
<p>How does the price of “Item X” compare to the average price?</p>
</blockquote>
<p>When you combine <code>group_by</code> and <code>mutate</code> the new column will be calculated based on the values within each group. Let’s group by <code>origin</code> to find the <code>mean()</code> price per pound at each origin.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>scrap <span class="ot">&lt;-</span> scrap <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">group_by</span>( _______ ) <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>         <span class="fu">mutate</span>(<span class="at">origin_mean_price =</span> <span class="fu">mean</span>(price_per_pound, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>         <span class="fu">ungroup</span>()</span></code></pre></div>
<p><br></p>
</div>
<div id="guess-who" class="section level1 unnumbered" style="border: 2px solid; border-color: hotpink; padding: 22px; border-radius: 25px; padding-top: 0;">
<h1>Guess Who?</h1>
<h2 style="margin-top: -24px;">
<em>Star Wars edition</em>
</h2>
<p><img src="../images/sw_guesswho.jpg" align="right" style="margin-top: -65px; margin-left: 24px; margin-right: 8px;" width="280" /></p>
<blockquote>
<p>Are you the best Jedi detective out there? Let’s play a game to find out.</p>
</blockquote>
<p><br></p>
<p>Guess what else comes with the <code>dplyr</code> package?</p>
<ul>
<li>A <strong>Star Wars data set</strong>.</li>
</ul>
<div id="open-the-data" class="section level4 unnumbered">
<h4>Open the data</h4>
<ol style="list-style-type: decimal">
<li>Load the <code>dplyr</code> package from your <code>library()</code></li>
<li>Pull the Star Wars dataset into your environment.</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>people <span class="ot">&lt;-</span> starwars</span></code></pre></div>
</div>
<div id="rules" class="section level3 unnumbered">
<h3><span style="text-decoration: underline;"> Rules </span></h3>
<ol style="list-style-type: decimal">
<li><strong>You have a <em>top secret</em> identity.</strong></li>
<li>Scroll through the Star Wars dataset and find a character you find interesting.
<ul>
<li><em>Or run <code>sample_n(starwars_data, 1)</code> to choose one at random.</em></li>
</ul></li>
<li><strong>Keep it hidden!</strong> Don’t show your neighbor the character you chose.</li>
<li>Take turns asking each other questions about your partner’s Star Wars character.</li>
<li>Use the answers to build a <code>filter()</code> function and narrow down the potential characters your neighbor may have picked.</li>
</ol>
<p>For example: Here’s a <code>filter()</code> statement that filters the data to the character <em>Plo Koon</em>.</p>
<div style="width: 90%; margin-left: 8%">
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>mr_koon <span class="ot">&lt;-</span> <span class="fu">filter</span>(people,</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>                  mass       <span class="sc">&lt;</span> <span class="dv">100</span>,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>                  eye_color  <span class="sc">!=</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>                  gender     <span class="sc">==</span> <span class="st">&quot;male&quot;</span>,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>                  homeworld  <span class="sc">==</span> <span class="st">&quot;Dorin&quot;</span>,</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>                  birth_year <span class="sc">&gt;</span> <span class="dv">20</span>)</span></code></pre></div>
</div>
<p>Elusive answers are allowed. For example, if someone asks: <em>What is your character’s mass?</em></p>
<ul>
<li>You can respond:
<ul>
<li><em>My character’s mass is equal to one less than their age.</em></li>
</ul></li>
<li>Or if you’re feeling generous you can respond:
<ul>
<li><em>My character’s mass is definitely more than 100, but less than 140.</em></li>
</ul></li>
</ul>
</div>
<div id="my-character-has-no-hair-missing-values" class="section level3 unnumbered">
<h3>My character has <strong>NO</strong> hair! <em>(Missing values)</em></h3>
<p>Sometimes a character will be missing a specific attribute. We learned earlier how R stores missing values as <code>NA</code>. If your character has a missing value for hair color, one of your filter statements would be <code>is.na(hair_color)</code>.</p>
<p><br></p>
<p><span style="margin-top: 18px; color: green;"> <strong>WINNER!</strong> </span></p>
<p>The winner is the first to guess their neighbor’s character.</p>
<details>
<summary class="btn_code_green">
<strong>WINNERS Click here!</strong>
</summary>
<div class="data" style="margin-top: -12px;">
<p>
<p><img src="../images/cat_win.jpg" style="width:96.0%" /></p>
</p>
</div>
</details>
<p><br></p>
</div>
<div id="time-for-a-rematch" class="section level3 unnumbered note">
<h3>Time for a rematch?</h3>
<p>Feel free to challenge someone new.</p>
</div>
<p><br></p>
</div>
<p><br></p>
<div id="ifelse" class="section level1" number="5">
<h1><span class="header-section-number">5</span> <code>ifelse()</code></h1>
<hr>
<div id="if-this-is-true-do-this-otherwise-do-this" class="section level3 unnumbered">
<h3><code>[If this is true]</code>, <code>"Do this"</code>, <code>"Otherwise do this"</code></h3>
<p><img src="../images/yoda_lightsaber.jpg" style="width: 47%; margin-left: 26%; margin-top: 12px; margin-bottom: 28px;" /></p>
<p>Here’s a handy <code>ifelse</code> statement to help you identify lightsabers.</p>
<div class="well" style="margin-top: 10px:">
<p><code>ifelse(</code><strong>Lightsaber</strong> <span style="color: green;">is <strong>GREEN</strong>?</span>, <strong>Yes!</strong> <code>Then Yoda's it is,</code> <strong>No!</strong> <code>Then not Yoda's)</code></p>
</div>
<p><br></p>
<p>Or say we want to label all the porgs over <em>60 cm</em> as <code>tall</code>, and everyone else as <code>short</code>. Whenever we want to add a column where the value depends on the value found in another column. We can use <code>ifelse()</code>.</p>
<blockquote>
<p>Or maybe we’re trying to save some money and want to flag all the items that cost less than 500 credits.
How?</p>
</blockquote>
</div>
<div id="mutate-ifelse-is-powerful" class="section level2 unnumbered">
<h2><code>mutate()</code> + <code>ifelse()</code> is powerful!</h2>
<p><img src="../images/yoda_rise_sm.png" style="width: 74%; margin-left: 12%" /></p>
<p><br></p>
<div id="on-the-cheap" class="section level3 unnumbered">
<h3>On the cheap</h3>
<p>Let’s use <code>mutate()</code> and <code>ifelse()</code> to add a column named <code>affordable</code> to our scrap data.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add an affordable column</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>scrap <span class="ot">&lt;-</span> scrap <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>         <span class="fu">mutate</span>(<span class="at">affordable =</span> <span class="fu">ifelse</span>(price_per_unit <span class="sc">&lt;</span> <span class="dv">500</span>, </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">&quot;Cheap&quot;</span>, </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">&quot;Expensive&quot;</span>))</span></code></pre></div>
</div>
<div id="explore-1" class="section level3 unnumbered tip">
<h3><i class="fa fa-user-astronaut" style="color: green;"></i> Explore!</h3>
<p>Use your new column and <code>filter()</code> to create a new <code>cheap_scrap</code> table.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cheap scrap table</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>cheap_scrap <span class="ot">&lt;-</span> scrap <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>               <span class="fu">filter</span>( _________ )</span></code></pre></div>
<p><br></p>
<p><strong>How many items are cheap?</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">n_distinct</span>(cheap_scrap<span class="sc">$</span>item)</span></code></pre></div>
<p><br></p>
<p><strong>What are the cheap items?</strong>
Try the <code>unique()</code> function on <code>cheap_scrap$item</code>.</p>
<p><br></p>
</div>
<p><br>
<br></p>
<div id="pop-quiz" class="section level3 unnumbered quiz">
<h3>Pop Quiz!</h3>
<p><strong>Use <code>arrange()</code> to find the cheapest item. What is it?</strong></p>
<p><input type="radio" name="cheap"> <em>Black box</em> <br>
<input type="radio" name="cheap"> <em>Electrotelescope</em> <br>
<input type="radio" name="cheap"> <em>Atomic drive</em> <br>
<input type="radio" name="cheap"> <em>Enviro filter</em> <br>
<input type="radio" name="cheap"> <em>Main drive</em> <br>
<br></p>
<details>
<summary class="btn_code">
<em>Show solution</em>
</summary>
<p>
<p><i class="fa fa-check" aria-hidden="true" style="color: green;"></i> <code>Black box</code></p>
<p><em>You win! </em></p>
</p>
</details>
</div>
<p><br></p>
<blockquote>
<p><strong>CONGRATULATIONS</strong> of galactic proportions to you.</p>
<p>We now have a clean and tidy data set. If BB8 ever receives new data again, we can re-run this script and in seconds we’ll have it all cleaned up.</p>
</blockquote>
<div style="clear: both;">

</div>
</div>
</div>
<div id="plots-with-ggplot2" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Plots with <em>ggplot2</em></h1>
<hr>
<div id="plot-the-data-plot-the-data-plot-the-data" class="section level4 unnumbered">
<h4><em>Plot the data, Plot the data, Plot the data</em></h4>
<p><br></p>
<p><img src="../images/ggplot2_hex.png" align="right" style="margin-right: 70px; margin-top: -124px;" width="180" /></p>
</div>
<div id="the-ggplot-sandwich" class="section level2 unnumbered">
<h2>The <code>ggplot()</code> sandwich</h2>
<p><img src="../images/auto_plot.gif" style="margin-top: -22px; margin-left: -40px; max-width: 110%;" /></p>
<h5 style="font-size: 28px; font-weight: bold; margin-top: -42px;">
A <code>ggplot</code> has 3 ingredients.
</h5>
</div>
<div id="the-base-plot" class="section level2 unnumbered">
<h2>1. The base plot</h2>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap)</span></code></pre></div>
<p><img src="/page/Day2_PM_files/figure-html/unnamed-chunk-27-1.png" width="960" /></p>
<p><br></p>
<blockquote>
<p>We load version 2 of the package <code>library(ggplot2)</code>, but the function to make the plot is plain <code>ggplot()</code>. <em>Sorry, ggplot is fun that like that.</em></p>
</blockquote>
</div>
<div id="the-the-x-y-aesthetics" class="section level2 unnumbered">
<h2>2. The the X, Y <em>aesthetics</em></h2>
<p>The <em>aesthetics</em> assign the columns from the data that you want to use in the chart. This is where you set the <code>X</code>-<code>Y</code> variables that determine the dimensions of the plot.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> destination, <span class="at">y =</span> amount)) </span></code></pre></div>
<p><img src="/page/Day2_PM_files/figure-html/unnamed-chunk-28-1.png" width="960" /></p>
</div>
<div id="the-layers-aka-geometries" class="section level2 unnumbered">
<h2>3. The layers AKA geometries</h2>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> destination, <span class="at">y =</span> amount)) <span class="sc">+</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="/page/Day2_PM_files/figure-html/unnamed-chunk-29-1.png" width="960" /></p>
<p><br></p>
</div>
<div id="colors" class="section level2 unnumbered">
<h2>Colors</h2>
<hr class="hrlvl2">
<p>Now let’s change the fill color to match the destination.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> destination, <span class="at">y =</span> amount, <span class="at">fill =</span> destination)) <span class="sc">+</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() </span></code></pre></div>
<p><img src="/page/Day2_PM_files/figure-html/unnamed-chunk-30-1.png" width="960" /></p>
<p><br></p>
</div>
<div id="sorting" class="section level2 unnumbered">
<h2>Sorting</h2>
<hr class="hrlvl2">
<p>Finally, let’s order things from lowest to highest.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(destination, amount, <span class="at">FUN =</span> sum), <span class="at">y =</span> amount, <span class="at">fill =</span> destination)) <span class="sc">+</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Destination&quot;</span>,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;The most scrap was sent to the Trade Caravan&quot;</span>)</span></code></pre></div>
<p><img src="/page/Day2_PM_files/figure-html/unnamed-chunk-31-1.png" width="960" /></p>
<div id="explore-2" class="section level3 unnumbered tip">
<h3><i class="fa fa-user-astronaut" style="color: green;"></i> Explore!</h3>
<p>Try making a scatterplot of any two columns.</p>
<p><em>Hint: Numeric variables will be more informative.</em></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> __column1__, <span class="at">y =</span> __column2__)) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code></pre></div>
</div>
</div>
<div id="colors-1" class="section level2 unnumbered">
<h2>Colors</h2>
<hr class="hrlvl2">
<p>Now let’s use color to show the origins of the scrap</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> destination, <span class="at">y =</span> credits, <span class="at">color =</span> origin)) <span class="sc">+</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="/page/Day2_PM_files/figure-html/unnamed-chunk-2-1.png" width="960" /></p>
<p><br></p>
<p>This is a <strong>A LOT</strong> of detail. Let’s make a bar chart and add up the sales to make it easier to understand.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> destination, <span class="at">y =</span> credits, <span class="at">fill =</span> origin)) <span class="sc">+</span> <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="/page/Day2_PM_files/figure-html/unnamed-chunk-3-1.png" width="960" /></p>
<blockquote>
<p>It’s still tricky to compare sales by origin. Let’s change the position of the columns.</p>
</blockquote>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> destination, <span class="at">y =</span> credits, <span class="at">fill =</span> origin)) <span class="sc">+</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p><img src="/page/Day2_PM_files/figure-html/unnamed-chunk-4-1.png" width="960" /></p>
</div>
</div>
<div id="more-plots" class="section level1" number="7">
<h1><span class="header-section-number">7</span> More Plots</h1>
<hr>
<div id="colors-2" class="section level2 unnumbered">
<h2>Colors</h2>
<hr class="hrlvl2">
<p>Now let’s use color to show the destinations of the scrap.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> origin, <span class="at">y =</span> credits, <span class="at">color =</span> destination)) <span class="sc">+</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="/page/Day2_PM_files/figure-html/unnamed-chunk-5-1.png" width="960" /></p>
<p><br></p>
<div id="yoda-says" class="section level3 unnumbered yoda">
<h3>Yoda says</h3>
<p><img src="../images/yoda_baby_sq.png" class="yoda-img"></p>
<p>An easy way to experiment with colors is to add layers like <code>scale_fill_brewer</code> or <code>scale_colour_brewer</code> to your plot. These link to <strong>colorBrewer</strong> palettes to give you accessible color themes.</p>
</div>
</div>
<div id="bar-charts" class="section level2 unnumbered">
<h2>Bar charts</h2>
<p>This is way too much detail. Let’s simplify and make a bar chart that adds up all the sales. Note that we use <code>fill=</code> inside <code>aes()</code> instead of <code>color=</code>. If we use color, we get a colorful outline and gray bars.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> origin, <span class="at">y =</span> credits, <span class="at">fill =</span> destination)) <span class="sc">+</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="/page/Day2_PM_files/figure-html/unnamed-chunk-6-1.png" width="960" /></p>
<p><br></p>
<p>Let’s change the position of the bars to make it easier to compare sales by destination for each origin? Remember, you can use <code>help(geom_col)</code> to learn about the different options for that plot. Feel free to do the same with other <code>geom_</code>’s as well.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> origin, <span class="at">y =</span> credits, <span class="at">fill =</span> destination)) <span class="sc">+</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p><img src="/page/Day2_PM_files/figure-html/unnamed-chunk-7-1.png" width="960" /></p>
</div>
<div id="facet-wrap" class="section level2 unnumbered">
<h2>Facet wrap</h2>
<p>Does the chart feel crowded to you? Let’s use the <code>facet wrap</code> function to put each origin on a separate chart.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> origin, <span class="at">y =</span> credits, <span class="at">fill =</span> destination)) <span class="sc">+</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="sc">+</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="st">&quot;destination&quot;</span>)</span></code></pre></div>
<p><img src="/page/Day2_PM_files/figure-html/unnamed-chunk-8-1.png" width="960" /></p>
</div>
<div id="labels" class="section level2 unnumbered">
<h2>Labels</h2>
<p>We can add lables to the chart by adding the <code>labs()</code> layer. Let’s give our chart from above a title.</p>
<p><strong>Titles and labels</strong></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> origin, <span class="at">y =</span> credits, <span class="at">fill =</span> destination)) <span class="sc">+</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="sc">+</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="st">&quot;destination&quot;</span>) <span class="sc">+</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title    =</span> <span class="st">&quot;Scrap sales by origin and destination&quot;</span>,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Planet Jakku&quot;</span>,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x        =</span> <span class="st">&quot;Origin&quot;</span>, </span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y        =</span> <span class="st">&quot;Total sales&quot;</span>)</span></code></pre></div>
<p><img src="/page/Day2_PM_files/figure-html/unnamed-chunk-9-1.png" width="960" /></p>
<p><br></p>
</div>
<div id="add-lines" class="section level2 unnumbered">
<h2>Add lines</h2>
<blockquote>
<p>More layers! Let’s say we were advised to avoid sales that were over <em>50 Billion</em> credits. Let’s add that as a horizontal line to our chart. For that, we use <code>geom_hline()</code>.</p>
</blockquote>
<p><strong>Reference lines</strong></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> origin, <span class="at">y =</span> credits, <span class="at">fill =</span> destination)) <span class="sc">+</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="sc">+</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="st">&quot;destination&quot;</span>) <span class="sc">+</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title    =</span> <span class="st">&quot;Scrap sales by origin and destination&quot;</span>,</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Planet Jakku&quot;</span>,</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x        =</span> <span class="st">&quot;Origin&quot;</span>, </span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y        =</span> <span class="st">&quot;Total sales&quot;</span>) <span class="sc">+</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fl">5E+10</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="/page/Day2_PM_files/figure-html/unnamed-chunk-10-1.png" width="960" /></p>
</div>
<div id="drop-2.2e06-scientific-notation" class="section level2 unnumbered">
<h2>Drop <code>2.2e+06</code> scientific notation</h2>
<p>Want to get rid of that ugly scientific notation? We can use <code>options(scipen = 999)</code>. Note that this is a general setting in R. Once you use <code>options(scipen = 999)</code> in your current session, you don’t have to use it again. <em>(Like loading a package, you only need to run the line once when you start a new R session).</em></p>
<p><br></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> origin, <span class="at">y =</span> credits, <span class="at">fill =</span> destination)) <span class="sc">+</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="sc">+</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="st">&quot;destination&quot;</span>) <span class="sc">+</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Scrap sales by origin and destination&quot;</span>, </span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x     =</span> <span class="st">&quot;Origin&quot;</span>, </span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y     =</span> <span class="st">&quot;Total sales&quot;</span>)</span></code></pre></div>
<p><img src="/page/Day2_PM_files/figure-html/unnamed-chunk-11-1.png" width="960" /></p>
<p><br></p>
<div id="explore-3" class="section level3 unnumbered tip">
<h3><i class="fa fa-user-astronaut" style="color: green;"></i> Explore!</h3>
<p>Let’s say we don’t like printing so many zeros and want the labels to be in <strong>Millions</strong> of credits. Any ideas on how to make that happen?</p>
</div>
</div>
<div id="themes" class="section level2 unnumbered">
<h2>Themes</h2>
<p>You may not like the appearance of these plots. <code>ggplot2</code> uses <code>theme</code> functions to change the appearance of a plot. Try some.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> origin, <span class="at">y =</span> credits, <span class="at">fill =</span> destination)) <span class="sc">+</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="sc">+</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="st">&quot;destination&quot;</span>) <span class="sc">+</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="/page/Day2_PM_files/figure-html/unnamed-chunk-12-1.png" width="960" /></p>
<div id="explore-4" class="section level3 unnumbered tip">
<h3><i class="fa fa-user-astronaut" style="color: green;"></i> Explore!</h3>
<p>Be bold and make a <strong>boxplot</strong>. We’ve covered how to do a scatterplot with <code>geom_point</code> and a bar chart with <code>geom_col</code>, but how would you make a boxplot showing the prices at each destination? Feel free to experiment with <code>color</code> ,<code>facet_wrap</code>, <code>theme</code>, and <code>labs</code>.</p>
<blockquote>
<p>May the force be with you.</p>
</blockquote>
</div>
</div>
<div id="save-plots" class="section level2 unnumbered">
<h2>Save plots</h2>
<hr class="hrlvl2">
<p>You’ve made some plots you can be proud of, so let’s learn to save them so we can cherish them forever. There’s a function called <code>ggsave</code> to do just that.</p>
<p>So how do we <code>ggsave</code> our plots?</p>
<p><strong>Let’s try <code>help(ggsave)</code> or <code>?ggsave</code>.</strong></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get help</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(ggsave)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>?ggsave</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the R code for your favorite plot first</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>()) <span class="sc">+</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>   .... <span class="sc">+</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>   ....</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Then save your plot to a png file of your choosing</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;results/plot_name.png&quot;</span>)</span></code></pre></div>
<p><br></p>
<blockquote>
<p><em>Learn more about saving plots at</em> <a href="http://stat545.com/block017_write-figure-to-file.html">http://stat545.com/</a></p>
</blockquote>
<p><br></p>
</div>
</div>
<div id="its-finn-time" class="section level1 unnumbered">
<h1>It’s Finn time</h1>
<hr class="hr2">
<p>Seriously, let’s pay that ransom already.</p>
<blockquote>
<p><strong>Q:</strong> <strong>Where should we go to get our 10,000 Black boxes?</strong></p>
</blockquote>
<p><br></p>
<p><strong>Step 1:</strong> Make a <code>geom_col()</code> plot showing the total pounds of Black boxes shipped to each destination.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cheap_scrap, <span class="fu">aes</span>(<span class="at">x =</span>  ______ , <span class="at">y =</span>  ______ )) <span class="sc">+</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>   geom_</span></code></pre></div>
<details>
<summary class="btn_code">
<em>Show code</em>
</summary>
<div class="quiz" style="margin-top: -9px;">
<p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cheap_scrap, <span class="fu">aes</span>(<span class="at">x =</span> destination, <span class="at">y =</span> total_pounds) ) <span class="sc">+</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="/page/Day2_PM_files/figure-html/unnamed-chunk-15-1.png" width="960" /></p>
</p>
</div>
</details>
<div id="pop-quiz-1" class="section level3 unnumbered quiz">
<h3>Pop Quiz!</h3>
<p><strong>Which destination has the most pounds of the cheapest item?</strong></p>
<p><input type="radio" name="town"> <em>Trade caravan</em> <br>
<input type="radio" name="town"> <em>Niima Outpost</em> <br>
<input type="radio" name="town"> <em>Raiders</em> <br>
<br></p>
<details>
<summary class="btn_code">
<em>Show solution</em>
</summary>
<p>
<p><i class="fa fa-check" style="color: green;"></i> <code>Raiders</code></p>
<p><em>Woop! Go get em! So long Jakku - see you never!</em></p>
</p>
</details>
</div>
<p><br></p>
<div id="concatulations" class="section level2 unnumbered">
<h2><i class="fa fa-star" style="color: gold"></i>😻CONCATULATIONS!😻 <i class="fa fa-star" style="color: gold"></i></h2>
<hr class="hrlvl2">
<blockquote>
<p><strong>Woop!</strong></p>
<p>Serious kudos to you.</p>
</blockquote>
<p><br><br></p>
</div>
</div>
<div id="plot-glossary" class="section level1 unnumbered">
<h1>Plot Glossary</h1>
<hr class="hr2">
<p><strong>Table of <code>aesthetics</code></strong></p>
<table>
<thead>
<tr class="header">
<th align="left">aes()</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>x =</code></td>
</tr>
<tr class="even">
<td align="left"><code>y =</code></td>
</tr>
<tr class="odd">
<td align="left"><code>alpha =</code></td>
</tr>
<tr class="even">
<td align="left"><code>fill =</code></td>
</tr>
<tr class="odd">
<td align="left"><code>color =</code></td>
</tr>
<tr class="even">
<td align="left"><code>size =</code></td>
</tr>
<tr class="odd">
<td align="left"><code>linetype =</code></td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>Table of <code>geoms</code></strong></p>
<p><img src="../images/geoms_1var.png" /></p>
<p><img src="../images/geoms_diagram.png" /></p>
<p><br></p>
<p><strong>Table of <code>themes</code></strong></p>
<p>You can customize the look of your plot by adding a <code>theme()</code> function.</p>
<p><img src="../images/ggplot_themes.png" /></p>
<details>
<summary class="btn_code">
<h4>
<i class="far fa-question-circle"></i> Plots Q+A
</h4>
</summary>
<div class="quiz" style="margin-top: -9px; font-size: 16px;">
<p>
<p><br></p>
<ul>
<li>How to modify the gridlines behind your chart?
<ul>
<li>Try the different themes at the end of this lesson: <code>theme_light()</code> or <code>theme_bw()</code></li>
<li>Or modify the color and size with <code>theme(panel.grid.minor = element_line(colour = "white", size = 0.5))</code></li>
<li>There’s even <code>theme_excel()</code></li>
</ul></li>
<li>How do you set the x and y scale manually?
<ul>
<li>Here is an example with a scatter plot: <code>ggplot() + geom_point() + xlim(beginning, end) + ylim(beginning, end)</code></li>
<li><strong>Warning:</strong> Values above or below the limits you set will not be shown. This is another great way to lie with data.</li>
</ul></li>
<li>How do you get rid of the legend if you don’t need it?
<ul>
<li><code>geom_point(aes(color = facility_name), show.legend = FALSE)</code></li>
<li>The <a href="http://www.cookbook-r.com/Graphs/Legends_(ggplot2)/">R Cookbook</a> shows a number of ways to get rid of legends.</li>
</ul></li>
<li>I only like dashed lines. How do you change the linetype to a <em>dashed</em> line?
<ul>
<li><code>geom_line(aes(color = facility_name), linetype = "dashed")</code></li>
<li>You can also try <code>"dotted"</code> and <code>"dotdash"</code>, or even<code>"twodash"</code></li>
</ul></li>
<li>How many colors are there in R? How does R know <code>hotpink</code> is a color?
<ul>
<li>There is an <a href="https://www.nceas.ucsb.edu/~frazier/RSpatialGuides/colorPaletteCheatsheet.pdf">R color cheatsheet</a><br />
</li>
<li>As well as a list of <a href="http://www.r-graph-gallery.com/42-colors-names/">R color names</a></li>
<li><code>library(viridis)</code> provides some great default color palettes for charts and maps.</li>
<li>This <a href="http://colorbrewer2.org/#type=sequential&amp;scheme=BuGn&amp;n=3">Color web tool</a> has palette ideas and color codes you can use in your plots</li>
</ul></li>
<li>Keyboard shortcuts for RStudio
<ul>
<li>There is a <a href="https://www.rstudio.com/wp-content/uploads/2016/01/rstudio-IDE-cheatsheet.pdf">Shortcut cheatsheet</a></li>
<li>In RStudio you can go to <em>Help</em> &gt; <em>Keyboard Shortcuts Help</em></li>
</ul></li>
</ul>
</p>
</div>
</details>
<p><br></p>
</div>
<div id="homeworld-training" class="section level1 unnumbered">
<h1>Homeworld training</h1>
<hr class="hr2">
<p><img src="../images/porg.png" style="float: right; margin-top: -10px;" /></p>
<ol style="list-style-type: decimal">
<li>Load one of the data sets below into R
<ul>
<li>Porg contamination on Ahch-To: “<a href="https://mn-r.netlify.com/data/porg_samples.csv" class="uri">https://mn-r.netlify.com/data/porg_samples.csv</a>”</li>
<li>Planet Endor air samples: “<a href="https://mn-r.netlify.com/data/air_endor.csv" class="uri">https://mn-r.netlify.com/data/air_endor.csv</a>”</li>
<li>Or use data from a recent project of yours</li>
</ul></li>
</ol>
<p><br></p>
<ol start="2" style="list-style-type: decimal">
<li>Create 2 plots using the data.</li>
<li><em>Don’t worry if it looks</em> <strong>really wrong</strong>. <em>Consider it art and try again.</em></li>
</ol>
<p><br></p>
<div id="yoda-says-1" class="section level3 unnumbered yoda">
<h3>Yoda says</h3>
<p><img src="../images/yoda_baby_sq.png" class="yoda-img"></p>
<p>When you add more layers to your plot using <code>+</code>, remember to place it at the end of each line.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This will work</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> origin, <span class="at">y =</span> credits)) <span class="sc">+</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co"># So will this</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> origin, <span class="at">y =</span> credits)) <span class="sc">+</span> <span class="fu">geom_point</span>()</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="co"># But this won&#39;t</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> origin, <span class="at">y =</span> credits))</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code></pre></div>
</div>
<p><br></p>
<div id="return-to-homebase" class="section level3 unnumbered">
<h3><i class="fa fa-rocket" aria-hidden="true"></i> Return to <a href="../post/day-2.html">Homebase</a></h3>
</div>
</div>
